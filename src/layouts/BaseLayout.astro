---
import '../styles/global.css';

interface Props {
    title: string;
    currentPage?: string;
}

const { title, currentPage = '' } = Astro.props;
const base = import.meta.env.BASE_URL;

// Helper function to construct paths correctly for both root and subdirectory deploys
const getPath = (path) => {
  const normalizedPath = path.startsWith('/') ? path : `/${path}`;
  // If base is root '/', just return the path
  if (base === '/') return normalizedPath;
  // Otherwise, concatenate base + path
  return `${base}${normalizedPath}`;
};
---

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{title}</title>
    <meta name="description" content="Padmanand Warrier - Technology, Service, Values across eras">
</head>
<body>
    <nav class="site-nav">
        <div class="nav-container">
            <a href={getPath('/')} class={currentPage === 'home' ? 'current' : ''}>Home</a>
            <span class="nav-divider">|</span>
            <a href={getPath('/seva')} class={currentPage === 'seva' ? 'current' : ''}>Seva</a>
            <span class="nav-divider">|</span>
            <a href={getPath('/work')} class={currentPage === 'work' ? 'current' : ''}>Work</a>
            <span class="nav-divider">|</span>
            
            <!-- Ideas with dropdown -->
            <div class="nav-dropdown">
                <a href={getPath('/ideas')} class={currentPage === 'ideas' ? 'current' : ''}>
                    Ideas
                </a>
                <div class="dropdown-content">
                    <a href={getPath('/ideas/technology')}>Technology & Systems</a>
                    <a href={getPath('/ideas/leadership')}>Leadership & Product</a>
                    <a href={getPath('/ideas/memoirs')}>Memoirs & Culture</a>
                    <a href={getPath('/ideas/philosophy')}>Philosophy & Learning</a>
                </div>
            </div>
            
            <span class="nav-divider">|</span>
            
            <!-- Inspirations with dropdown -->
            <div class="nav-dropdown">
                <a href={getPath('/inspirations')} class={currentPage === 'inspirations' ? 'current' : ''}>
                    Inspirations
                </a>
                <div class="dropdown-content">
                    <a href={getPath('/inspirations/spiritual')}>Spiritual Guidance</a>
                    <a href={getPath('/inspirations/family')}>Family & Roots</a>
                    <a href={getPath('/inspirations/people')}>Influential People</a>
                    <a href={getPath('/inspirations/works')}>Books, Poetry & Films</a>
                    <a href={getPath('/inspirations/places')}>Travel & Culture</a>
                </div>
            </div>
        </div>
    </nav>

    <main>
        <slot />
    </main>
</body>
</html>
