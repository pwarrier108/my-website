---
import '../styles/global.css';

interface Props {
    title: string;
    currentPage?: string;
}

const { title, currentPage = '' } = Astro.props;
const base = import.meta.env.BASE_URL;

// Helper function to construct paths correctly for both root and subdirectory deploys
const getPath = (path) => {
  const normalizedPath = path.startsWith('/') ? path : `/${path}`;
  // If base is root '/', just return the path
  if (base === '/') return normalizedPath;
  // Otherwise, concatenate base + path
  return `${base}${normalizedPath}`;
};
---

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{title}</title>
    <meta name="description" content="Padmanand Warrier - Technology, Service, Values across eras">
</head>
<body>
    <nav class="site-nav">
        <div class="nav-container">
            <a href={getPath('/')} class={currentPage === 'home' ? 'current' : ''}>Home</a>
            <span class="nav-divider">|</span>
            <a href={getPath('/seva')} class={currentPage === 'seva' ? 'current' : ''}>Seva</a>
            <span class="nav-divider">|</span>
            <a href={getPath('/work')} class={currentPage === 'work' ? 'current' : ''}>Work</a>
            <span class="nav-divider">|</span>
            <a href={getPath('/ideas')} class={currentPage === 'ideas' ? 'current' : ''}>Ideas</a>
            <span class="nav-divider">|</span>
            <a href={getPath('/inspirations')} class={currentPage === 'inspirations' ? 'current' : ''}>Inspirations</a>
        </div>
    </nav>

    <main>
        <slot />
    </main>
</body>
</html>
