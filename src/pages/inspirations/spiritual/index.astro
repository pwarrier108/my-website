---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';
import { getPath } from '../../../utils/pathUtils';

// Get spiritual content
const spiritualContent = await getCollection('inspirations', ({ data }) => {
    return data.category === 'spiritual' && (data.status === 'published' || data.status === 'canonical');
});

// Sort by date, most recent first
const sortedContent = spiritualContent.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());

// Format date
const formatDate = (date) => {
    return new Intl.DateTimeFormat('en-US', { month: 'long', year: 'numeric' }).format(date);
};
---

<BaseLayout title="Spiritual Guidance - Padmanand Warrier" currentPage="inspirations">
    <div class="page-container">
        
        <h1>Spiritual Guidance</h1>
        
        <p class="section-intro">
            My parents led me to spiritual inquiry, including a close association with Sri Sathya Sai Baba. His teachings—Love All Serve All, Help Ever Hurt Never—became a practical framework for leadership that I first practiced organizing volunteer retreats and service projects, then applied throughout my career in technology. This is about how principles learned through service shaped my approach to product management, user research, and leading teams at scale.
        </p>

        {sortedContent.length > 0 ? (
            <ul class="content-list">
                {sortedContent.map((item) => (
                    <li class="content-item">
                        <h3 class="content-item-title">
                            <a href={getPath(`/inspirations/spiritual/${item.slug}`)}>{item.data.title}</a>
                        </h3>
                        <div class="metadata">
                            <span class="metadata-item">
                                <span class="metadata-label">{item.data.type.charAt(0).toUpperCase() + item.data.type.slice(1)}</span>
                            </span>
                            <span class="metadata-item">Published {formatDate(item.data.date)}</span>
                            {item.data.themes && item.data.themes.length > 0 && (
                                <span class="metadata-item">
                                    Themes: {item.data.themes.join(', ')}
                                </span>
                            )}
                        </div>
                        <p class="content-item-summary">{item.data.summary}</p>
                    </li>
                ))}
            </ul>
        ) : (
            <p>Content coming soon.</p>
        )}

    </div>
</BaseLayout>
