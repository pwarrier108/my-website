---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';
import { getPath } from '../../../utils/pathUtils';

const category = 'enterprise';

const workContent = await getCollection('work', ({ data }) => 
    data.category === category && (data.status === 'published' || data.status === 'canonical')
);

const sortedContent = workContent.sort((a, b) => 
    b.data.date.valueOf() - a.data.date.valueOf()
);
---

<BaseLayout title="Enterprise & Cloud Era (2000s-2010s) — Work" currentPage="work">
    <div class="page-container">
        <h1>Enterprise & Cloud Era (2000s-2010s)</h1>
        
        <p>
            Microsoft platforms, digital analytics at global scale, enterprise transformation, 
            and cloud-based systems architecture. Leading cross-functional teams through the 
            shift from on-premise to cloud infrastructure.
        </p>

        {sortedContent.length > 0 ? (
            <ul class="content-list">
                {sortedContent.map((item) => (
                    <li class="content-item">
                        <h3>
                            <a href={getPath(`/work/enterprise/${item.slug}`)}>
                                {item.data.title}
                            </a>
                        </h3>
                        {item.data.summary && <p class="summary">{item.data.summary}</p>}
                        <div class="metadata">
                            <span class="date">{item.data.date.toLocaleDateString('en-US', { year: 'numeric', month: 'long' })}</span>
                            {item.data.era && <span class="era">· Era: {item.data.era}</span>}
                        </div>
                    </li>
                ))}
            </ul>
        ) : (
            <p><em>Content coming soon.</em></p>
        )}
    </div>
</BaseLayout>
