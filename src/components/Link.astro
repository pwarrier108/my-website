---
// Link component that respects BASE_URL for internal navigation
const { href, ...props } = Astro.props;

// Helper function to construct proper paths
function getPath(path: string): string {
    const base = import.meta.env.BASE_URL || '/';
    // Remove trailing slash from base if present
    const cleanBase = base.endsWith('/') && base.length > 1 ? base.slice(0, -1) : base;
    // Ensure path starts with /
    const cleanPath = path.startsWith('/') ? path : `/${path}`;
    return `${cleanBase}${cleanPath}`;
}

// Only process internal links (starting with /)
const processedHref = href.startsWith('/') ? getPath(href) : href;
---

<a href={processedHref} {...props}>
    <slot />
</a>
